---
import { correo_contributing_link, correo_documentation_link, correo_feature_link, correo_plugin_link, correo_download_link, correo_github_link } from '../accessibility';
import DownloadButton from "../components/DownloadButton.astro";
import NavigationLink from "../components/NavigationLink.astro";

---

<script>
    const menuButton = document.getElementById("menu");
    
    if (menuButton) {
        menuButton.addEventListener("click", () => {
        [...document.querySelectorAll(".navmenu")].forEach((Element) => {
            if (Element.classList.contains("navmenu-toggle")) {
                Element.classList.remove("navmenu-toggle");
            } else {
                Element.classList.add("navmenu-toggle");
            }
        });
    });
    }
  </script>

<nav>
    <div class="flex items-center justify-between lg:justify-normal pl-2 pr-2 pb-2 pt-2 w-full h-fit shadow-md">
        <div class="flex items-center">
            <img src="correo_logo.svg" width="48" height="48" alt="The Correo Logo">
            <h5 class="ml-2 text-xl font-medium">
                CorreoMQTT
            </h5>
        </div>
    
        <div class="lg:grow">
            <span class="lg:hidden mr-2" id="menu">
                <i class="fa-solid fa-bars text-xl"></i>
            </span>
    
            <div class="hidden lg:block">
                <NavigationLink text="Features" href="#feature_section" ariaLabel={correo_feature_link} />
                <NavigationLink text="Documentation" href="https://github.com/EXXETA/correomqtt/wiki" target="_blank" ariaLabel={correo_documentation_link}/>
                <NavigationLink text="Contributing" href="#contributing_section" ariaLabel={correo_contributing_link}/>
                <NavigationLink text="Plugins" href="https://github.com/EXXETA/correomqtt-plugins" target="_blank" ariaLabel={correo_plugin_link} />
            </div>
        </div>
    
        <div class="hidden lg:block">
            <DownloadButton/>
        </div>
        
        <a class="hidden lg:block" href="https://github.com/EXXETA/correomqtt" target="_blank" aria-label="Read more about the Correo Source Code" rel="noopener noreferrer">
            <i class="fa-brands fa-github text-3xl"></i>
        </a>
    </div>
    <div class="navmenu flex flex-col leading-relaxed bg-tertiary">
        <NavigationLink text="Features" href="#feature_section" ariaLabel={correo_feature_link} />
        <NavigationLink text="Documentation" href="https://github.com/EXXETA/correomqtt/wiki" ariaLabel={correo_contributing_link} />
        <NavigationLink text="Contributing" href="#contributing_section" ariaLabel={correo_contributing_link} />
        <NavigationLink text="Plugins" href="https://github.com/EXXETA/correomqtt-plugins" target="_blank" ariaLabel={correo_plugin_link}/>
        <NavigationLink text="Download" href="https://github.com/EXXETA/correomqtt/releases/latest" target="_blank" ariaLabel={correo_download_link} />
        <NavigationLink text="Github" href="https://github.com/EXXETA/correomqtt-plugins" target="_blank" ariaLabel={correo_github_link} />
    </div>
</nav>

<style>
    nav {
        position: sticky;
        top: 0;
        background: white;
        z-index: 100;
    }
    .navmenu {
        max-height: 0;
        padding: 0;
        overflow: hidden;
        border-bottom: 1px solid rgb(209 213 219);
        transition: transform 250ms ease-in-out;
        transform: scaleY(0);
        transform-origin: top;
    }
    .navmenu-toggle {
        max-height: 100vh;
        padding: 0.5rem 0;
        transform: scaleY(1);
    }
</style>